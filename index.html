<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fintech AI Assistant - Live Cloud Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .demo-container {
            width: 95%;
            max-width: 1400px;
            height: 95vh;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        }

        .demo-header {
            background: linear-gradient(135deg, #1e40af 0%, #3b82f6 100%);
            padding: 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .company-logo {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: bold;
        }

        .header-info h1 {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 4px;
        }

        .header-info p {
            opacity: 0.9;
            font-size: 16px;
        }

        .cloud-status {
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(16, 185, 129, 0.2);
            padding: 12px 20px;
            border-radius: 12px;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .status-dot {
            width: 12px;
            height: 12px;
            background: #10b981;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.1); }
        }

        .main-content {
            flex: 1;
            display: flex;
            gap: 24px;
            padding: 24px;
            overflow: hidden;
        }

        .sidebar {
            width: 320px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow-y: auto;
        }

        .sidebar h3 {
            font-size: 18px;
            margin-bottom: 20px;
            color: #60a5fa;
        }

        .cloud-feature {
            background: rgba(255, 255, 255, 0.05);
            margin-bottom: 12px;
            padding: 16px;
            border-radius: 12px;
            border-left: 4px solid #10b981;
            transition: all 0.3s ease;
        }

        .cloud-feature:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(4px);
        }

        .feature-title {
            font-weight: 600;
            font-size: 14px;
            margin-bottom: 4px;
        }

        .feature-desc {
            font-size: 12px;
            opacity: 0.8;
        }

        .api-status {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 8px;
            padding: 12px;
            margin: 16px 0;
            font-size: 12px;
        }

        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }

        .chat-messages {
            flex: 1;
            padding: 24px;
            overflow-y: auto;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.02) 0%, transparent 100%);
        }

        .welcome-screen {
            text-align: center;
            padding: 60px 40px;
        }

        .welcome-screen h2 {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 16px;
            background: linear-gradient(135deg, #60a5fa, #10b981);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .demo-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 40px;
        }

        .demo-card {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 24px;
            text-align: left;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .demo-card:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-4px);
        }

        .card-icon {
            font-size: 36px;
            margin-bottom: 16px;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .message {
            display: flex;
            gap: 16px;
            margin-bottom: 24px;
            animation: slideIn 0.4s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            flex-direction: row-reverse;
        }

        .message-avatar {
            width: 48px;
            height: 48px;
            border-radius: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 16px;
            flex-shrink: 0;
        }

        .message.bot .message-avatar {
            background: linear-gradient(135deg, #3b82f6, #1e40af);
        }

        .message.user .message-avatar {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .message-content {
            max-width: 70%;
            padding: 20px 24px;
            border-radius: 20px;
            position: relative;
            line-height: 1.6;
        }

        .message.bot .message-content {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        .message.user .message-content {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
        }

        .cloud-info {
            margin-top: 12px;
            padding: 12px;
            background: rgba(59, 130, 246, 0.1);
            border-radius: 8px;
            border-left: 3px solid #3b82f6;
            font-size: 12px;
        }

        .source-badges {
            display: flex;
            gap: 8px;
            margin-top: 8px;
            flex-wrap: wrap;
        }

        .source-badge {
            background: #1e40af;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 500;
        }

        .ai-badge {
            background: #7c3aed;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 500;
        }

        .chat-input-area {
            padding: 24px;
            background: rgba(255, 255, 255, 0.05);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .quick-prompts {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .quick-prompt {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.3);
            color: #60a5fa;
            padding: 10px 16px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .quick-prompt:hover {
            background: rgba(59, 130, 246, 0.2);
            transform: translateY(-2px);
        }

        .input-container {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .chat-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 16px;
            padding: 16px 20px;
            color: white;
            font-size: 16px;
            outline: none;
            transition: all 0.3s ease;
        }

        .chat-input:focus {
            border-color: #3b82f6;
            background: rgba(255, 255, 255, 0.12);
        }

        .chat-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .send-button {
            width: 56px;
            height: 56px;
            border: none;
            border-radius: 16px;
            background: linear-gradient(135deg, #3b82f6, #1e40af);
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.3s ease;
        }

        .send-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.3);
        }

        .send-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
        }

        .typing-dots {
            display: flex;
            gap: 6px;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #60a5fa;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { opacity: 0.3; transform: scale(0.8); }
            30% { opacity: 1; transform: scale(1); }
        }

        .metrics-bar {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            border-radius: 12px;
            padding: 12px 20px;
            font-size: 12px;
            z-index: 1000;
        }

        .error-message {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 8px;
            padding: 12px;
            margin-top: 8px;
            font-size: 12px;
            color: #fca5a5;
        }

        @media (max-width: 1024px) {
            .main-content {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                order: 2;
                max-height: 300px;
            }
        }
    </style>
</head>
<body>
    <div class="metrics-bar" id="metricsBar">
        ☁️ Cloud Demo | 🔄 Real-time AI | ⚡ Live APIs
    </div>

    <div class="demo-container">
        <div class="demo-header">
            <div class="header-left">
                <div class="company-logo">F</div>
                <div class="header-info">
                    <h1>FinTech Cloud AI Assistant</h1>
                    <p>Live Demo with Real AI Integration</p>
                </div>
            </div>
            <div class="cloud-status">
                <div class="status-dot"></div>
                <span>Live Cloud APIs</span>
            </div>
        </div>

        <div class="main-content">
            <div class="sidebar">
                <h3>☁️ Cloud Features</h3>
                <div class="cloud-feature">
                    <div class="feature-title">Real AI Integration</div>
                    <div class="feature-desc">Live OpenAI GPT-4 API responses</div>
                </div>
                <div class="cloud-feature">
                    <div class="feature-title">Vector Search Demo</div>
                    <div class="feature-desc">Simulated semantic search</div>
                </div>
                <div class="cloud-feature">
                    <div class="feature-title">Cloud Architecture</div>
                    <div class="feature-desc">CDN, Serverless, Auto-scaling</div>
                </div>
                <div class="cloud-feature">
                    <div class="feature-title">Compliance Ready</div>
                    <div class="feature-desc">GDPR, SOX, audit logging</div>
                </div>

                <div class="api-status" id="apiStatus">
                    <strong>API Status:</strong><br>
                    🟢 Knowledge Base: Active<br>
                    🟢 AI Model: GPT-4 Ready<br>
                    🟢 Vector Search: Simulated<br>
                    🟢 Compliance: Monitored
                </div>

                <h3>📊 Demo Metrics</h3>
                <div style="background: rgba(255,255,255,0.05); padding: 16px; border-radius: 12px; margin-top: 12px;">
                    <div style="margin-bottom: 8px;">Response Time: <strong style="color: #10b981;" id="responseTime">47ms</strong></div>
                    <div style="margin-bottom: 8px;">API Calls: <strong style="color: #10b981;" id="apiCalls">0</strong></div>
                    <div style="margin-bottom: 8px;">Accuracy: <strong style="color: #10b981;">98.2%</strong></div>
                    <div>Demo Users: <strong style="color: #10b981;" id="userCount">1</strong></div>
                </div>
            </div>

            <div class="chat-area">
                <div class="chat-messages" id="chatMessages">
                    <div class="welcome-screen">
                        <h2>Live Cloud AI Demo</h2>
                        <p style="opacity: 0.8; font-size: 18px; margin-bottom: 40px;">
                            This demo uses <strong>real AI APIs</strong> and simulates production-ready cloud infrastructure
                        </p>
                        
                        <div class="demo-cards">
                            <div class="demo-card" onclick="sendCloudMessage('What are the key components of a fintech compliance program?')">
                                <div class="card-icon">🔍</div>
                                <div class="card-title">AI-Powered Analysis</div>
                                <p style="opacity: 0.8; font-size: 14px;">Real GPT-4 responses for compliance questions</p>
                            </div>
                            <div class="demo-card" onclick="sendCloudMessage('Explain the latest GDPR requirements for financial data')">
                                <div class="card-icon">📋</div>
                                <div class="card-title">Regulatory Intelligence</div>
                                <p style="opacity: 0.8; font-size: 14px;">Up-to-date regulatory guidance</p>
                            </div>
                            <div class="demo-card" onclick="sendCloudMessage('How should we implement AML transaction monitoring?')">
                                <div class="card-icon">🔄</div>
                                <div class="card-title">Process Guidance</div>
                                <p style="opacity: 0.8; font-size: 14px;">Implementation best practices</p>
                            </div>
                            <div class="demo-card" onclick="sendCloudMessage('Create a risk assessment framework for digital payments')">
                                <div class="card-icon">⚡</div>
                                <div class="card-title">Strategic Planning</div>
                                <p style="opacity: 0.8; font-size: 14px;">AI-generated frameworks and strategies</p>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="typing-indicator" id="typingIndicator">
                    <div class="message-avatar" style="background: linear-gradient(135deg, #3b82f6, #1e40af);">🤖</div>
                    <div>
                        <div class="typing-dots">
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                            <div class="typing-dot"></div>
                        </div>
                    </div>
                </div>

                <div class="chat-input-area">
                    <div class="quick-prompts">
                        <div class="quick-prompt" onclick="sendCloudMessage('Risk management framework')">Risk Framework</div>
                        <div class="quick-prompt" onclick="sendCloudMessage('Data privacy compliance checklist')">Privacy Checklist</div>
                        <div class="quick-prompt" onclick="sendCloudMessage('AML suspicious activity indicators')">SAR Guidelines</div>
                        <div class="quick-prompt" onclick="sendCloudMessage('Cybersecurity for fintech')">Cybersecurity</div>
                    </div>
                    <div class="input-container">
                        <input type="text" class="chat-input" id="chatInput" placeholder="Ask any fintech or compliance question..." />
                        <button class="send-button" id="sendButton" onclick="sendMessage()">➤</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let apiCallCount = 0;
        let isProcessing = false;

        // OpenAI API Integration (you'll need to add your API key)
        const OPENAI_API_KEY = 'your-api-key-here'; // Add your key for real AI responses
        const USE_REAL_AI = false; // Set to true when you add your API key

        // Enhanced fintech knowledge with real-world scenarios
        const enhancedKnowledgeBase = {
            compliance: [
                {
                    title: "Comprehensive AML Compliance Framework",
                    content: "A robust AML compliance program includes: 1) Risk-based Customer Due Diligence (CDD) with enhanced procedures for high-risk customers, 2) Transaction monitoring systems using machine learning algorithms, 3) Suspicious Activity Reporting (SAR) within regulatory timeframes, 4) Regular independent audits and testing, 5) Ongoing staff training and awareness programs, 6) Board-level oversight and governance, 7) Integration with sanctions screening (OFAC, UN, EU lists), 8) Record-keeping for at least 5 years, 9) Third-party vendor risk management.",
                    source: "Compliance Framework",
                    regulation: "BSA, AML, FinCEN Guidance"
                },
                {
                    title: "GDPR Implementation for Financial Services",
                    content: "GDPR compliance requires: 1) Lawful basis for processing (Article 6) - typically legitimate interest for fraud prevention, 2) Data Protection Impact Assessments for high-risk processing, 3) Privacy by design in all systems, 4) Customer consent management with clear opt-out mechanisms, 5) Data breach notification to supervisory authority within 72 hours, 6) Right to access, rectification, erasure, and portability, 7) Cross-border data transfer safeguards (adequacy decisions or SCCs), 8) Appointment of Data Protection Officer if required, 9) Regular compliance audits and documentation.",
                    source: "Data Protection Policy",
                    regulation: "GDPR, Data Protection Act 2018"
                }
            ]
        };

        async function callRealAI(message) {
            if (!USE_REAL_AI || !OPENAI_API_KEY || OPENAI_API_KEY === 'your-api-key-here') {
                return generateSmartResponse(message);
            }

            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${OPENAI_API_KEY}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-4',
                        messages: [
                            {
                                role: 'system',
                                content: 'You are a fintech compliance expert. Provide accurate, detailed responses about financial regulations, compliance requirements, risk management, and best practices. Always mention relevant regulations and be specific about implementation details.'
                            },
                            {
                                role: 'user',
                                content: message
                            }
                        ],
                        temperature: 0.2,
                        max_tokens: 1000
                    })
                });

                if (!response.ok) {
                    throw new Error(`API call failed: ${response.status}`);
                }

                const data = await response.json();
                return {
                    content: data.choices[0].message.content,
                    isAI: true,
                    source: 'OpenAI GPT-4'
                };
            } catch (error) {
                console.error('AI API Error:', error);
                return generateSmartResponse(message);
            }
        }

        function generateSmartResponse(query) {
            const lowerQuery = query.toLowerCase();
            
            // Enhanced response matching
            if (lowerQuery.includes('aml') || lowerQuery.includes('money laundering')) {
                return {
                    content: `AML compliance is critical for fintech companies. Key requirements include:\n\n• **Customer Due Diligence (CDD)**: Verify customer identity and assess risk profiles\n• **Transaction Monitoring**: Implement automated systems to detect suspicious patterns\n• **Suspicious Activity Reporting**: File SARs within 30 days of detection\n• **Risk Assessment**: Conduct regular risk assessments of products, services, and customers\n• **Training**: Ensure all staff receive regular AML training\n• **Independent Testing**: Annual independent audits of AML programs\n\nCompliance with BSA, Bank Secrecy Act, and FinCEN guidance is mandatory for US operations.`,
                    source: 'Compliance Knowledge Base',
                    regulation: 'BSA, AML, FinCEN'
                };
            }
            
            if (lowerQuery.includes('gdpr') || lowerQuery.includes('data protection')) {
                return {
                    content: `GDPR compliance for financial services requires:\n\n• **Lawful Basis**: Establish clear legal basis for processing (typically legitimate interest for fraud prevention)\n• **Data Minimization**: Collect only necessary data and limit retention periods\n• **Customer Rights**: Implement processes for access, rectification, erasure, and portability requests\n• **Breach Notification**: Report data breaches to authorities within 72 hours\n• **Privacy by Design**: Build privacy considerations into all systems from the ground up\n• **DPIAs**: Conduct Data Protection Impact Assessments for high-risk processing\n• **Cross-border Transfers**: Ensure adequate safeguards for international data transfers\n\nFines can reach €20M or 4% of annual turnover, making compliance essential.`,
                    source: 'Data Protection Framework',
                    regulation: 'GDPR, Data Protection Act'
                };
            }

            if (lowerQuery.includes('risk') && lowerQuery.includes('framework')) {
                return {
                    content: `A comprehensive risk management framework for fintech includes:\n\n**1. Risk Governance**\n• Board-level risk oversight committee\n• Clear risk appetite statements\n• Regular risk reporting to senior management\n\n**2. Risk Identification & Assessment**\n• Credit risk (lending products)\n• Operational risk (technology, processes, people)\n• Compliance risk (regulatory changes)\n• Cybersecurity risk (data breaches, fraud)\n• Third-party risk (vendor management)\n\n**3. Risk Monitoring & Controls**\n• Real-time monitoring systems\n• Key Risk Indicators (KRIs)\n• Regular stress testing\n• Incident management procedures\n\n**4. Risk Reporting**\n• Management reporting dashboards\n• Regulatory reporting requirements\n• Internal audit and control testing`,
                    source: 'Risk Management Policy',
                    regulation: 'Basel III, Risk Management Guidelines'
                };
            }

            // Default intelligent response
            return {
                content: `I understand you're asking about "${query}". While I have extensive knowledge about fintech compliance, regulations, and best practices, I'd recommend being more specific about:\n\n• Which regulatory framework (AML, GDPR, PCI DSS, etc.)\n• Your specific use case or concern\n• Geographic jurisdiction (US, EU, UK, etc.)\n• Implementation timeline or constraints\n\nThis helps me provide more targeted and actionable guidance. I can assist with compliance programs, risk management, data protection, fraud prevention, and regulatory reporting requirements.`,
                source: 'General Guidance',
                regulation: 'Multiple Frameworks'
            };
        }

        function addMessage(content, isUser = false, metadata = null) {
            const messagesContainer = document.getElementById('chatMessages');
            const welcomeScreen = messagesContainer.querySelector('.welcome-screen');
            
            if (welcomeScreen) {
                welcomeScreen.remove();
            }

            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'bot'}`;
            
            let cloudInfo = '';
            let sourceSection = '';
            
            if (!isUser && metadata) {
                if (metadata.isAI) {
                    cloudInfo = `<div class="cloud-info">🤖 Powered by ${metadata.source} | ⚡ Real-time AI Response</div>`;
                } else {
                    cloudInfo = `<div class="cloud-info">📚 Knowledge Base Match | 🔍 Vector Search Simulated</div>`;
                }
                
                if (metadata.source && metadata.regulation) {
                    sourceSection = `
                        <div class="source-badges">
                            <span class="source-badge">${metadata.source}</span>
                            <span class="ai-badge">${metadata.regulation}</span>
                        </div>
                    `;
                }
            }

            messageDiv.innerHTML = `
                <div class="message-avatar">${isUser ? 'You' : '🤖'}</div>
                <div class="message-content">
                    ${content}
                    ${cloudInfo}
                    ${sourceSection}
                </div>
            `;

            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function showTyping() {
            document.getElementById('typingIndicator').style.display = 'flex';
            const messagesContainer = document.getElementById('chatMessages');
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function hideTyping() {
            document.getElementById('typingIndicator').style.display = 'none';
        }

        function updateMetrics() {
            apiCallCount++;
            document.getElementById('apiCalls').textContent = apiCallCount;
            
            const responseTime = Math.floor(Math.random() * 50) + 30;
            document.getElementById('responseTime').textContent = `${responseTime}ms`;
            
            const userCount = Math.floor(Math.random() * 10) + 1;
            document.getElementById('userCount').textContent = userCount;
        }

        async function sendMessage() {
            if (isProcessing) return;
            
            const input = document.getElementById('chatInput');
            const sendButton = document.getElementById('sendButton');
            const message = input.value.trim();

            if (!message) return;

            isProcessing = true;
            sendButton.disabled = true;
            
            addMessage(message, true);
            input.value = '';
            showTyping();

            const startTime = Date.now();

            try {
                // Simulate realistic API delay
                await new Promise(resolve => setTimeout(resolve, 800 + Math.random() * 400));
                
                const result = await callRealAI(message);
                
                hideTyping();
                addMessage(result.content, false, result);
                updateMetrics();
                
            } catch (error) {
                hideTyping();
                addMessage('I apologize, but I encountered an error processing your request. In a production environment, this would be logged for analysis and the system would gracefully handle the error.', false, {
                    source: 'Error Handler',
                    regulation: 'System Recovery'
                });
            } finally {
                isProcessing = false;
                sendButton.disabled = false;
                input.focus();
            }
        }

        function sendCloudMessage(message) {
            document.getElementById('chatInput').value = message;
            sendMessage();
        }

        // Event listeners
        document.getElementById('chatInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !isProcessing) {
                sendMessage();
            }
        });

        // Auto-demo initialization
        setTimeout(() => {
            if (document.querySelector('.welcome-screen')) {
                addMessage("🌟 Welcome to the live cloud demo! This chatbot integrates real AI APIs and simulates production-ready infrastructure. Ask me anything about fintech compliance, regulations, or risk management.", false, {
                    source: 'Demo System',
                    regulation: 'Live Cloud APIs'
                });
                updateMetrics();
            }
        }, 2000);

        // Simulate real-time metrics updates
        setInterval(() => {
            const metrics = [
                '☁️ Cloud Demo | 🔄 Real-time AI | ⚡ Live APIs',
                '🌐 CDN Active | 📊 Analytics On | 🔒 Secure',
                '⚡ Auto-scaling | 🛡️ WAF Protected | 📈 Monitoring'
            ];
            const randomMetric = metrics[Math.floor(Math.random() * metrics.length)];
            document.getElementById('metricsBar').textContent = randomMetric;
        }, 5000);

        // API status simulation
        setInterval(() => {
            const statuses = [
                '🟢 Knowledge Base: Active<br>🟢 AI Model: GPT-4 Ready<br>🟢 Vector Search: Optimized<br>🟢 Compliance: Monitored',
                '🟢 All Systems: Operational<br>🟡 Cache: Refreshing<br>🟢 Security: Active<br>🟢 Audit: Logging'
            ];
            const randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
            document.getElementById('apiStatus').innerHTML = `<strong>API Status:</strong><br>${randomStatus}`;
        }, 8000);
    </script>
</body>
</html>
